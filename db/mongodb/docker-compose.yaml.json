{
  "parts": [
   "version: '3'\n\nservices:\n  ## Config server\n  configsvr:\n    deploy:\n      placement:\n        constraints:\n          - node.hostname==magisterka-Lenovo-Y700-17ISK-20\n    image: mongo:4.4\n    command: mongod --configsvr --replSet rs-config-server --port 27017 --dbpath /data/db --bind_ip_all\n    volumes:\n      - \"~/etl-nosql/db/mongodb/scripts:/scripts\"\n      - \"~/etl-nosql/db/mongodb/data/{cluster_size}/{data_size}/config/db:/data/db\"\n    ports:\n      - 27017\n      - 27018\n      - 27019\n    networks:\n      - mongonet\n\n  ## Router\n  router:\n    image: mongo:4.4\n    deploy:\n      placement:\n        constraints:\n          - node.hostname==magisterka-Lenovo-Y700-17ISK-20\n    command: mongos --port 27017 --configdb rs-config-server/configsvr:27017 --bind_ip_all\n    volumes:\n      - \"~/etl-nosql/db/mongodb/scripts:/scripts\"\n      - \"~/etl-nosql/db/mongodb/data/{cluster_size}/{data_size}/router/db:/data/db\"\n      - \"~/etl-nosql/db/table_data/json/{data_size}:/importdata\"\n    ports:\n      - 27017:27017\n      - 27018:27018\n      - 27019:27019\n    networks:\n      - mongonet\n\n  ## Shards A - hostname==magisterka-Lenovo-Y700-17ISK-20\n  shard01a:\n    image: mongo:4.4\n    deploy:\n      placement:\n        constraints:\n          - node.hostname==magisterka-Lenovo-Y700-17ISK-20\n    command: mongod --port 27017 --shardsvr --replSet rs-shard-01\n    volumes:\n      - \"~/etl-nosql/db/mongodb/scripts:/scripts\"\n      - \"~/etl-nosql/db/mongodb/data/{cluster_size}/{data_size}/shard01a/db:/data/db\"\n    ports:\n      - 27017\n      - 27018\n      - 27019\n    networks:\n      - mongonet\n\n  shard01b:\n    image: mongo:4.4\n    deploy:\n      placement:\n        constraints:\n          - node.hostname==magisterka-OptiPlex-780-19\n    command: mongod --port 27017 --shardsvr --replSet rs-shard-01\n    volumes:\n      - \"~/etl-nosql/db/mongodb/scripts:/scripts\"\n      - \"~/etl-nosql/db/mongodb/data/{cluster_size}/{data_size}/shard01b/db:/data/db\"\n    ports:\n      - 27017\n      - 27018\n      - 27019\n    networks:\n      - mongonet\n\n  shard01c:\n    image: mongo:4.4\n    deploy:\n      placement:\n        constraints:\n          - node.hostname==magisterka-OptiPlex-780-18\n    command: mongod --port 27017 --shardsvr --replSet rs-shard-01\n    volumes:\n      - \"~/etl-nosql/db/mongodb/scripts:/scripts\"\n      - \"~/etl-nosql/db/mongodb/data/{cluster_size}/{data_size}/shard01c/db:/data/db\"\n    ports:\n      - 27017\n      - 27018\n      - 27019\n    networks:\n      - mongonet\n\n ## Shards 2 - magisterka-OptiPlex-780-19\n  shard02a:\n    image: mongo:4.4\n    deploy:\n      placement:\n        constraints:\n          - node.hostname==magisterka-Lenovo-Y700-17ISK-20\n    command: mongod --port 27017 --shardsvr --replSet rs-shard-02\n    volumes:\n      - \"~/etl-nosql/db/mongodb/scripts:/scripts\"\n      - \"~/etl-nosql/db/mongodb/data/{cluster_size}/{data_size}/shard02a/db:/data/db\"\n    ports:\n      - 27017\n      - 27018\n      - 27019\n    networks:\n      - mongonet\n\n  shard02b:\n    image: mongo:4.4\n    deploy:\n      placement:\n        constraints:\n          - node.hostname==magisterka-OptiPlex-780-19\n    command: mongod --port 27017 --shardsvr --replSet rs-shard-02\n    volumes:\n      - \"~/etl-nosql/db/mongodb/scripts:/scripts\"\n      - \"~/etl-nosql/db/mongodb/data/{cluster_size}/{data_size}/shard02b/db:/data/db\"\n    ports:\n      - 27017\n      - 27018\n      - 27019\n    networks:\n      - mongonet\n\n  shard02c:\n    image: mongo:4.4\n    deploy:\n      placement:\n        constraints:\n          - node.hostname==magisterka-OptiPlex-780-18\n    command: mongod --port 27017 --shardsvr --replSet rs-shard-02\n    volumes:\n      - \"~/etl-nosql/db/mongodb/scripts:/scripts\"\n      - \"~/etl-nosql/db/mongodb/data/{cluster_size}/{data_size}/shard02c/db:/data/db\"\n    ports:\n      - 27017\n      - 27018\n      - 27019\n    networks:\n      - mongonet\n\n\n ## Shards C - magisterka-OptiPlex-780-18\n  shard03a:\n    image: mongo:4.4\n    deploy:\n      placement:\n        constraints:\n          - node.hostname==magisterka-Lenovo-Y700-17ISK-20\n    command: mongod --port 27017 --shardsvr --replSet rs-shard-03\n    volumes:\n      - \"~/etl-nosql/db/mongodb/scripts:/scripts\"\n      - \"~/etl-nosql/db/mongodb/data/{cluster_size}/{data_size}/shard03a/db:/data/db\"\n    ports:\n      - 27017\n      - 27018\n      - 27019\n    networks:\n      - mongonet\n\n  shard03b:\n    image: mongo:4.4\n    deploy:\n      placement:\n        constraints:\n          - node.hostname==magisterka-OptiPlex-780-19\n    command: mongod --port 27017 --shardsvr --replSet rs-shard-03\n    volumes:\n      - \"~/etl-nosql/db/mongodb/scripts:/scripts\"\n      - \"~/etl-nosql/db/mongodb/data/{cluster_size}/{data_size}/shard03b/db:/data/db\"\n    ports:\n      - 27017\n      - 27018\n      - 27019\n    networks:\n      - mongonet\n\n  shard03c:\n    image: mongo:4.4\n    deploy:\n      placement:\n        constraints:\n          - node.hostname==magisterka-OptiPlex-780-18\n    command: mongod --port 27017 --shardsvr --replSet rs-shard-03\n    volumes:\n      - \"~/etl-nosql/db/mongodb/scripts:/scripts\"\n      - \"~/etl-nosql/db/mongodb/data/{cluster_size}/{data_size}/shard03c/db:/data/db\"\n    ports:\n      - 27017\n      - 27018\n      - 27019\n    networks:\n      - mongonet\n\nnetworks:\n  mongonet:\n    external:\n      name: mongoNet\n\n"
  ],
  "end": ""
}